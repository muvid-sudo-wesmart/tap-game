<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Тапай за Калашникова</title>
  <style>
    /* ====== Страница и фон ====== */
    html, body {
      height: 100%; margin: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background: radial-gradient(
        circle at center,
        #ffffff 0%,
        #4a5d8c 50%,
        #1e2a47 100%
      );
      color: #fff;
      text-align: center;
      overflow-x: hidden;
      padding-bottom: 100px; /* место под нижнее меню */
    }

    /* ====== Лоадер ====== */
    #loader {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.4);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      z-index: 1000;
    }
    #loader img {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%; object-fit: cover;
      filter: brightness(0.5);
    }
    .loader-progress {
      width: 80%; height: 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 4px; overflow: hidden;
      margin-top: 12px;
    }
    .loader-progress-bar {
      width: 0; height: 100%;
      background: #ff9800;
      transition: width 0.4s ease-out;
    }
    .loader-text {
      margin-top: 10px; font-size: 1.2em;
    }

    /* ====== «Сердечки» ====== */
    .heart {
      position: absolute; font-size: 24px; color: #ff6b81;
      pointer-events: none; user-select: none;
      animation: floatUp 0.8s ease-out forwards;
    }
    @keyframes floatUp {
      from { opacity: 1; transform: translateY(0) scale(1); }
      to   { opacity: 0; transform: translateY(-60px) scale(1.5); }
    }

    /* ====== Хедер ====== */
    header {
      padding: 20px 0 0;
    }
    header h1 {
      margin: 0; font-size: 1.8em;
    }
    header p {
      margin: 8px 0 0; font-size: 1.2em;
    }

    /* ====== Секции ====== */
    main section {
      display: none; padding: 20px;
      animation: fadeIn 0.3s ease forwards;
    }
    main section.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ====== Секция «Игра» ====== */
    #game {
      text-align: center;
    }
    /* контейнер под белый круг */
    .tap-container {
      position: relative;
      width: 260px;
      height: 260px;
      margin: 24px auto;
    }
    .tap-container::before {
      content: "";
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      background: #fff;
      border-radius: 50%;
      z-index: 0;
    }
    #tap-image {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 200px; /* желаемый размер */
      height: auto;
      cursor: pointer;
      z-index: 1;
      transition: transform 0.1s ease;
    }
    #tap-image:active {
      transform: translate(-50%, -50%) scale(1.1);
    }

    /* ====== Уровень и прогресс ====== */
    .level-container {
      width: 80%; max-width: 320px;
      margin: 12px auto;
    }
    .level-info {
      margin-bottom: 6px;
    }
    .level-progress-container {
      width: 100%; height: 12px;
      background: rgba(255,255,255,0.2);
      border-radius: 6px; overflow: hidden;
    }
    .level-progress {
      width: 0; height: 100%;
      background: #ffd54f; transition: width 0.3s ease;
    }

    /* ====== Текстовые показатели ====== */
    #game p, #game span {
      margin: 8px 0; font-size: 1.1em;
    }

    /* ====== Остальные секции (задачи, друзья, статистика, достижения) ====== */
    /* Ваши существующие стили */

    /* ====== Нижнее меню ====== */
    nav.bottom-nav {
      position: fixed; bottom: 12px; left: 50%;
      transform: translateX(-50%);
      display: flex; gap: 8px;
      background: rgba(255,255,255,0.25);
      padding: 6px; border-radius: 20px;
      width: calc(100% - 32px); max-width: 500px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      z-index: 500;
    }
    nav.bottom-nav .tab {
      flex: 1; display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      padding: 6px 0; background: transparent; border: none;
      color: #fff; font-size: 0.8em; cursor: pointer;
      transition: background .2s, color .2s;
    }
    nav.bottom-nav .tab img {
      width: 24px; height: 24px; margin-bottom: 4px;
      filter: brightness(1.2);
    }
    nav.bottom-nav .tab:hover {
      background: rgba(255,255,255,0.15);
    }
    nav.bottom-nav .tab.active {
      background: #fff; color: #1e88e5; border-radius: 12px;
    }
    nav.bottom-nav .tab.active img {
      filter: none;
    }
  </style>
</head>
<body>

  <!-- Лоадер -->
  <div id="loader">
    <img src="https://raw.githubusercontent.com/muvid-sudo-wesmart/tap-game/main/Frame_159-3.png" alt="Загрузка"/>
    <div class="loader-progress"><div class="loader-progress-bar"></div></div>
    <p class="loader-text">Загрузка…</p>
  </div>

  <!-- Хедер -->
  <header>
    <h1>Тапай за Калашникова</h1>
    <p>СЛЫШАТЬ. ПОМОГАТЬ. РЕШАТЬ.</p>
  </header>

  <!-- Контент -->
  <main>
    <!-- Игра -->
    <section id="game" class="active">
      <div class="tap-container">
        <img id="tap-image"
             src="https://raw.githubusercontent.com/muvid-sudo-wesmart/tap-game/main/tap.png"
             alt="Tap"
             onclick="tap(event)"/>
      </div>

      <div class="level-container">
        <div class="level-info">Уровень: <span id="level">1</span> / 5</div>
        <div class="level-progress-container">
          <div class="level-progress" id="level-progress"></div>
        </div>
      </div>

      <p>Тапов: <span id="counter">0</span></p>
      <p>Рекорд: <span id="best">0</span></p>
    </section>

    <!-- Здесь ваши секции tasks, friends, stats, achievements -->
  </main>

  <!-- Нижнее меню -->
  <nav class="bottom-nav">
    <button class="tab active" onclick="showTab(event,'game')">
      <img src="https://img.icons8.com/ios-filled/50/000000/home.png" alt="Главная"/><span>Главная</span>
    </button>
    <button class="tab" onclick="showTab(event,'tasks')">
      <img src="https://img.icons8.com/ios-filled/50/000000/checklist.png" alt="Задания"/><span>Задания</span>
    </button>
    <button class="tab" onclick="showTab(event,'friends')">
      <img src="https://img.icons8.com/ios-filled/50/000000/user-group-man-man.png" alt="Друзья"/><span>Друзья</span>
    </button>
    <button class="tab" onclick="showTab(event,'stats')">
      <img src="https://img.icons8.com/ios-filled/50/000000/combo-chart.png" alt="Статистика"/><span>Статистика</span>
    </button>
    <button class="tab" onclick="showTab(event,'achievements')">
      <img src="https://img.icons8.com/ios-filled/50/000000/medal.png" alt="Топ"/><span>Топ</span>
    </button>
  </nav>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Лоадер
      let p = 0;
      const bar = document.querySelector('.loader-progress-bar');
      const loader = document.getElementById('loader');
      const iv = setInterval(() => {
        p += 20;
        bar.style.width = p + '%';
        if (p >= 100) {
          clearInterval(iv);
          setTimeout(() => loader.style.display = 'none', 200);
        }
      }, 400);

      // Данные
      let count = 0, best = 0, friends = [];
      const MAX_LEVEL = 5, STEP = 1000;

      // Анимация «сердечко»
      function createHeart(e) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = '❤';
        const r = e.target.getBoundingClientRect();
        heart.style.left = `${r.left + r.width/2 - 12}px`;
        heart.style.top  = `${r.top  + r.height/2 - 12}px`;
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 800);
      }

      // Обновление UI
      function updateUI() {
        document.getElementById('counter').textContent = count;
        document.getElementById('best').textContent    = best;
        document.getElementById('stat-total')?.textContent = count;
        document.getElementById('stat-best')?.textContent  = best;

        const lvl = Math.min(Math.floor(count/STEP) + 1, MAX_LEVEL);
        document.getElementById('level').textContent = lvl;
        document.querySelector('.level-info').textContent =
          `Уровень: ${lvl} / ${MAX_LEVEL}`;

        const prog = lvl < MAX_LEVEL
          ? count % STEP
          : count - (MAX_LEVEL - 1) * STEP;
        const pct = Math.min(prog / STEP * 100, 100);
        document.getElementById('level-progress').style.width = `${pct}%`;
      }

      // Обработчики
      window.tap = e => {
        createHeart(e);
        count++;
        best = Math.max(best, count);
        updateUI();
      };
      window.showTab = (e, id) => {
        document.querySelectorAll('main section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav.bottom-nav .tab').forEach(b => b.classList.remove('active'));
        e.currentTarget.classList.add('active');
      };

      // Инициализация
      updateUI();
    });
  </script>
</body>
</html>

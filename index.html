<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>–¢–∞–ø–∞–π –∑–∞ –ö–∞–ª–∞—à–Ω–∏–∫–æ–≤–∞</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0 }
    body {
      font-family: Arial, sans-serif;
      background: #0b3861;
      color: #fff;
      padding-bottom: 60px;
    }
    /* –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
    #loader {
      position: fixed; inset: 0;
      background: #000;
      display: flex; align-items: center; justify-content: center;
      flex-direction: column;
      z-index: 1000;
    }
    #loader .bar {
      width: 80%; height: 10px;
      background: rgba(255,255,255,0.3);
      border-radius: 5px;
      overflow: hidden;
      margin-top: 10px;
    }
    #loader .bar-inner {
      width: 0; height:100%;
      background: #f7931e;
      transition: width 0.5s;
    }
    #loader p { margin-top: 8px; }

    header {
      background: #203760;
      padding: 12px 16px;
      text-align: center;
    }
    header h1 { font-size: 1.5em; }

    main > section {
      display: none;
      padding: 20px 16px;
      text-align: center;
    }
    main > section.active {
      display: block;
    }

    .vote-count { font-size: 2em; margin-bottom: 4px; }
    .tagline { margin-bottom: 16px; font-size: 1em; }

    .logo {
      width: 180px; height: 180px;
      background: radial-gradient(circle,#2f6ba8,#0b3861);
      border-radius: 50%;
      margin: 0 auto 24px;
      display: flex; align-items: center; justify-content: center;
    }
    .logo img { width: 100px; }

    #tap-image {
      width: 200px;
      cursor: pointer;
      transition: transform .1s;
    }
    #tap-image:active { transform: scale(1.1); }

    h2 { margin-bottom: 12px; }

    ul { list-style:none; padding:0; max-width: 500px; margin: 0 auto; }
    .task-card {
      background: #fff; color: #333;
      border-radius: 8px; padding: 12px;
      margin: 8px 0;
    }
    .task-card a { color:#0077cc; text-decoration:none; }
    .task-card button {
      margin-top: 8px;
      padding: 6px 12px;
      background: #4caf50; color: #fff;
      border:none; border-radius:6px;
      cursor:pointer;
    }
    .done { color: #24cc5b; font-weight:bold; }

    form { max-width: 400px; margin: 0 auto; display:flex; gap:8px; }
    form input, form button { padding:8px; font-size:1em; border-radius:4px; }
    form input { flex:1; border:1px solid #ccc; }
    form button { background:#4caf50; color:#fff; border:none; cursor:pointer; }

    table { width: 100%; max-width: 500px; margin: 0 auto; border-collapse: collapse; }
    th, td {
      padding: 8px; border-bottom:1px solid #555;
      text-align:left; font-size: 0.95em;
    }

    nav.bottom-nav {
      position: fixed; bottom: 0; left: 0; right:0;
      display: flex; background: #203760;
      border-top:1px solid #fff3;
      z-index:500;
    }
    nav.bottom-nav button {
      flex:1; padding: 10px 0;
      background:none; border:none;
      color:#fff; font-size:0.9em;
      cursor:pointer;
    }
    nav.bottom-nav button:hover { background: rgba(255,255,255,0.1); }
  </style>
</head>
<body>

  <!-- Loader -->
  <div id="loader">
    <p style="color:#fff;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    <div class="bar"><div class="bar-inner"></div></div>
  </div>

  <header><h1>–¢–∞–ø–∞–π –∑–∞ –ö–∞–ª–∞—à–Ω–∏–∫–æ–≤–∞!</h1></header>

  <main>
    <!-- –ì–ª–∞–≤–Ω–∞—è -->
    <section id="game" class="active">
      <div class="vote-count" id="vote-count">0 –≥–æ–ª–æ—Å–æ–≤</div>
      <div class="tagline">–°–õ–´–®–ê–¢–¨. –ü–û–ú–û–ì–ê–¢–¨. –†–ï–®–ê–¢–¨.</div>
      <div class="logo"><img src="https://raw.githubusercontent.com/muvid-sudo-wesmart/tap-game/main/logo.png" alt=""></div>
      <img id="tap-image" src="https://raw.githubusercontent.com/muvid-sudo-wesmart/tap-game/main/tap.png" alt="" onclick="tap()">
      <p>–¢–∞–ø–æ–≤: <span id="counter">0</span> | –†–µ–∫–æ—Ä–¥: <span id="best">0</span></p>
    </section>

    <!-- –ó–∞–¥–∞–Ω–∏—è -->
    <section id="tasks">
      <h2>üéØ –ó–∞–¥–∞–Ω–∏—è</h2>
      <ul id="task-list"></ul>
    </section>

    <!-- –î—Ä—É–∑—å—è -->
    <section id="friends">
      <h2>üë• –î—Ä—É–∑—å—è</h2>
      <form onsubmit="addFriend(event)">
        <input id="friend-name" placeholder="–ò–º—è –¥—Ä—É–≥–∞" required>
        <input id="friend-taps" type="number" placeholder="–¢–∞–ø–æ–≤" required>
        <button>–î–æ–±–∞–≤–∏—Ç—å</button>
      </form>
      <table>
        <thead><tr><th>#</th><th>–ò–º—è</th><th>–¢–∞–ø—ã</th></tr></thead>
        <tbody id="friends-table"></tbody>
      </table>
    </section>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <section id="stats">
      <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <p>–í—Å–µ–≥–æ —Ç–∞–ø–æ–≤: <span id="stat-total">0</span></p>
      <p>–†–µ–∫–æ—Ä–¥: <span id="stat-best">0</span></p>
    </section>

    <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
    <section id="achievements">
      <h2>üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
      <ul id="achievement-list"></ul>
    </section>
  </main>

  <nav class="bottom-nav">
    <button onclick="showTab('game')">–ì–ª–∞–≤–Ω–∞—è</button>
    <button onclick="showTab('tasks')">–ó–∞–¥–∞–Ω–∏—è</button>
    <button onclick="showTab('friends')">–î—Ä—É–∑—å—è</button>
    <button onclick="showTab('stats')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
    <button onclick="showTab('achievements')">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
  </nav>

  <script>
    document.addEventListener('DOMContentLoaded', ()=> {
      // Loader animation
      let p=0, bar=document.querySelector('.bar-inner');
      const iv=setInterval(()=>{
        p+=20; bar.style.width=p+'%';
        if(p>=100){ clearInterval(iv); setTimeout(()=>document.getElementById('loader').style.display='none', 200); }
      },200);

      // Data
      let count=0, best=0, friends=[];
      const thresholds=[100,500,2000,5000,10000];

      // UI updates
      function updateUI(){
        document.getElementById('counter').textContent=count;
        document.getElementById('best').textContent=best;
        document.getElementById('stat-total').textContent=count;
        document.getElementById('stat-best').textContent=best;
        document.getElementById('vote-count').textContent = `${count} –≥–æ–ª–æ—Å–æ–≤`;

        // achievements
        const ach=document.getElementById('achievement-list');
        ach.innerHTML='';
        if(best>=100) ach.innerHTML+='<li>üî• 100 —Ç–∞–ø–æ–≤!</li>';
        if(best>=1000) ach.innerHTML+='<li>üí• 1 000 —Ç–∞–ø–æ–≤!</li>';
        if(best>=5000) ach.innerHTML+='<li>üöÄ 5 000 —Ç–∞–ø–æ–≤!</li>';
        ach.innerHTML+=`<li>üë• –î—Ä—É–∑–µ–π: ${friends.length}</li>`;
      }

      // Tabs
      window.showTab=id=>{
        document.querySelectorAll('main > section').forEach(s=>s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
      };

      // Tap
      window.tap=()=>{
        count++; if(count>best) best=count;
        updateUI(); renderTasks(); // if task rewards increments
      };

      // Tasks
      function renderTasks(){
        const tasks=[
          {id:'t1', text:`–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ <a href="https://t.me/volonteri_kalashnikova" target="_blank">Telegram</a>`, reward:300},
          {id:'t2', text:`–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ <a href="https://vk.com/id803959232" target="_blank">VK</a>`, reward:300},
          {id:'t3', text:`–ü—Ä–æ–≥–æ–ª–æ—Å—É–π <a href="https://example.com/vote" target="_blank">–∑–¥–µ—Å—å</a>`, reward:500},
          {id:'t4', text:'–ü—Ä–∏–≥–ª–∞—Å–∏ 3 –¥—Ä—É–∑–µ–π', reward:700},
          {id:'t5', text:'–ü—Ä–∏–≥–ª–∞—Å–∏ 5 –¥—Ä—É–∑–µ–π', reward:1000},
        ];
        const ul=document.getElementById('task-list');
        ul.innerHTML='';
        tasks.forEach(t=>{
          const done = localStorage.getItem('task_'+t.id);
          const li=document.createElement('li');
          li.className='task-card';
          li.innerHTML=`
            <strong>${t.text}</strong><br>üéÅ ${t.reward} —Ç–∞–ø–æ–≤<br>
            ${done? '<span class="done">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>' 
                  : `<button onclick="completeTask('${t.id}',${t.reward})">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>`}
          `;
          ul.appendChild(li);
        });
      }
      window.completeTask=(id,rew)=>{
        if(!localStorage.getItem('task_'+id)){
          count+=rew; if(count>best)best=count;
          localStorage.setItem('task_'+id,'done');
          updateUI(); renderTasks();
        }
      };

      // Friends
      function renderFriends(){
        const tb=document.getElementById('friends-table');
        tb.innerHTML='';
        friends.forEach((f,i)=>{
          tb.innerHTML+=`<tr><td>${i+1}</td><td>${f.name}</td><td>${f.taps}</td></tr>`;
        });
      }
      window.addFriend=e=>{
        e.preventDefault();
        const name=document.getElementById('friend-name').value.trim();
        const taps=parseInt(document.getElementById('friend-taps').value);
        if(name && !isNaN(taps)){
          friends.push({name,taps});
          document.getElementById('friend-name').value='';
          document.getElementById('friend-taps').value='';
          renderFriends(); updateUI();
        }
      };

      // Init
      updateUI(); renderTasks(); renderFriends();
    });
  </script>
</body>
</html>
